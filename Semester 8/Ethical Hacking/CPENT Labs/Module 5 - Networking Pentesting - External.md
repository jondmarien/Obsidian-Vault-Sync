---
title: Module 5 - Networking Pentesting - External
author:
  - Jon Marien
created: 2025-05-28
published: 2025-05-28
tags:
  - skillsontario
  - competitions
  - certifications
  - classes
---

| Title                                       | Author                       | Created      | Published    | Tags                                                                                                                               |
| ------------------------------------------- | ---------------------------- | ------------ | ------------ | ---------------------------------------------------------------------------------------------------------------------------------- |
| Module 5 - Networking Pentesting - External | <ul><li>Jon Marien</li></ul> | May 28, 2025 | May 28, 2025 | [[#skillsontario\|#skillsontario]], [[#competitions\|#competitions]], [[#certifications\|#certifications]], [[#classes\|#classes]] |
# Task - Lab 3
**Source**: CyberQv2 **Module 5** Lab
1) Complete the following exercises:
	- [Exercise 1: Exploring and Auditing a Machine Using Nmap](#Exercise%201%20Exploring%20and%20Auditing%20a%20Machine%20Using%20Nmap)
	- [Exercise 2: Accessing Misconfigured FTP Connection on a Remote Machine](#Exercise%202%20Accessing%20Misconfigured%20FTP%20Connection%20on%20a%20Remote%20Machine)
	- [Exercise 3: Enumerate a Wordpress Site (APT)](#Exercise%203%20Enumerate%20a%20Wordpress%20Site%20(APT))
	- [Exercise 4: Perform Web Application Scanning with WMAP (APT)](#Exercise%204%20Perform%20Web%20Application%20Scanning%20with%20WMAP%20(APT))
2) Output/Report: Screenshots of the following steps from the CyberQ Lab Instructions document.
	- Exercise 1: Steps 7, 8, 13, 17
	- Exercise 2: Steps 12, 15
	- Exercise 3: Steps 5, 7
	- Exercise 4: Steps 8, 12, 13, 14
	- Quiz answers in all exercises
3) Follow the lab guideline while taking screenshots and submitting the report.

---

# Module 05: Network Penetration Testing Methodology-External

## Objective

The objective of this lab is to help students in conducting network scanning, network vulnerability analysis, and network security maintenance.

You need to perform network scans to:

- Check live systems and open ports
- Perform banner grabbing and OS fingerprinting
- Identify network vulnerabilities
- Draw network diagrams of vulnerable hosts
- Pentest vulnerabilities to gain unauthorized access

## Scenario

External Penetration Testing determines the possibility of network security attacks from outside of the network perimeter. It evaluates the organizationâ€™s systems and network for vulnerabilities such as missing patches, unnecessary services, weak authentication, and weak encryption.

An attacker uses vulnerabilities to disrupt the confidentiality, availability or integrity of the network, thereby allowing the organization to address each weakness. Vulnerability scanning is a critical component of any penetration testing assignment. As an expert Penetration Tester or a Security Administrator, you need to conduct penetration testing and list the threats and vulnerabilities found in an organizationâ€™s network, perform port scanning, network scanning, and vulnerability scanning to identify IP/hostname, live hosts, and vulnerabilities. Then, you need to take specific preventive countermeasures to overcome them.

---

# Exercise 1: Exploring and Auditing a Machine Using Nmap
*Exercise 1: Show Steps 7, 8, 13, 17*

First, we ping the site to get the IP address quickly:
![[image-348.png]]
Launch Zenmap, which is the gui version of nmap for windows, and enter in the IP in the target box. Select **Intensive Scan**:
![[image-350.png]]
![[image-351.png]]
![[image-352.png]]

After that, browse to the **Ports/Hosts** tab, to see what is open, what service, and version it is:
![[image-353.png]]

We can also browse to **Topology**:
![[image-354.png]]

We can also view the **Host Details** tab for some more information on the server:
![[image-356.png]]

We can also see the previously run scans on this ip:
![[image-357.png]]

If we focus next on the **Services** tab, and then the `msrpc` service, which is the **RPC service** from Microsoft, we can get even more information about which ports are open and running on which protocols:
![[image-358.png]]

Then, we save the scan data, to somewhere like our desktop, or working folder:
![[image-359.png]]
![[image-360.png]]

If we open up said saved data, we can view the results in our browser:
![[image-361.png]]

> [!answer]-
> ![[image-362.png]]

---
# Exercise 2: Accessing Misconfigured FTP Connection on a Remote Machine

## Scenario

File transfer protocol allows authenticated users to upload/access and download files and folders between a client and a server. When anonymous access is enabled on the server, it allows everyone access files on it, leaving the security of sensitive information at risk.

As a pentester, you should be able to find the FTP servers inside a network which have anonymous access enabled. In this lab, you will be learning how to identify the FTP servers which have anonymous access enabled.

---

*Exercise 2: Show Steps 12, 15*

In this exercise, we focus on using nmap via the CLI on Parrot OS:
![[image-363.png]]

As we can see, the FTP port is open, confirmed by our other scan. Let us try and run the `ftp-anon` script and see if we can login anonymously to the machine or not:
![[image-364.png]]

This machine DOES have anonymous login enabled, so we do not need a password to login:
![[image-365.png]]

We then check the file structure, and browse to the `public` folder:
![[image-366.png]]

There exists a `secret.txt` file in the `public` folder, so let's download that:
![[image-367.png]]

![[image-368.png]]

Cool! Let us now try if we can upload a file, albeit empty, to the FTP server:
![[image-369.png]]
![[image-370.png]]

Awesome, successful!
If we want to disabled these abilities for end-users, some config options need to be set, namely:
![[image-372.png]]
![[image-373.png]]

> [!answer]-
> ![[image-371.png]]

---
# Exercise 3: Enumerate a Wordpress Site (APT)

## Scenario

In this lab, you will:

- Use the wpscan tool
- Enumerate a Wordpress site

---

*Exercise 3: Show Steps 5, 7*

First, before we scan the site, we make sure `wpscan` is installed:
![[image-374.png]]

Then, we can scan the site:
![[image-375.png]]

And now with `wpscan`, for users. We use `sudo wpscan --url http://www.cpent.com --enumerate u`:
![[image-377.png]]
![[image-376.png]]![[image-378.png]]
Pretty cool info! Let's see how we can use this. Next, we enumerate on any used themes on the site, using `sudo wpscan --url http://www.cpent.com --enumerate t`. They use a few on this one:
![[image-379.png]]
![[image-380.png]]

And now for plugins, using `sudo wpscan --url http://www.cpent.com --enumerate p`:
![[image-381.png]]

> [!check]-
> ![[image-382.png]]
> ![[image-383.png]]

---
# Exercise 4: Perform Web Application Scanning with WMAP (APT)

## Scenario

The WMAP tool is used for web application scanning from within the Metasploit console. In this lab you will:

- Use the tool WMAP that is part of the Metasploit tools
- Scan a web servers with WMAP

---

*Exercise 4: Show Steps 8, 12, 13, 14*

In this exercise, we are using `WMAP` for web scanning but in the form of the `metasploit` console (`msfconsole`). First, we start the `postgresql` service on the Parrot machine:
![[image-384.png]]

Here, we can check if the `msfdb` needs to be initialized:
![[image-385.png]]

We are all good. Let us continue.
Every time `msfconsole` is started, a new ASCII art is selected unless otherwise defined:
![[image-386.png]]

So, now that we're in `msfconsole`, we can load the `wmap` plugin like so:
![[image-387.png]]

Now we have to add the sites and the targets (IPs) we want to specifically scan:
![[image-388.png]]
![[image-389.png]]

We can use `wmap_targets -l` to see a list of targets:
![[image-390.png]]

If we are unsure how to initiate a `wmap` scan, we can use `wmap_run -h` to check:
![[image-391.png]]

We have initiated the test scan! This shows all enabled modules. Now, we wait:
![[image-392.png]]
![[image-393.png]]

And for our other target:
![[image-394.png]]

Now, we can launch the scan with all modules using the flag `-e` on `wmap_run`:
![[image-395.png]]
![[image-396.png]]
![[image-397.png]]
![[image-398.png]]

This scan runs for a while, so I left it in the background. It finished!
![[image-400.png]]
Only took ~431s ðŸ˜‰.

Now for the second and final target:
![[image-401.png]]

Once I came back, it had finished processing both sites/targets, and we can view the vulnerabilities it found using `wmap_vulns -l`. It also works with `vulns`, albeit in a different format:
![[image-402.png]]
![[image-403.png]]

Cool! Very awesome way to find vulns within a site. ðŸ˜Ž

> [!check]-
> ![[image-399.png]]

---
# Conclusion
We are all done with Lab #3, on External Network Pentesting. That was fun!